# 정보처리산업기사 CBT 모의시험

정보처리산업기사 필기 기출문제를 실제 CBT(Computer Based Test)처럼 연습할 수 있는 웹 서비스입니다.

## 주요 기능

- 회차별 모의시험
  - 2022~2024년, 각 연도 3회차(총 60문항) 구성
  - 과목 구분: 1~20(1과목), 21~40(2과목), 41~60(3과목)
  - `100문제 풀어보기` 모드 제공 (`/test/100`)

- 사용자 편의성 개선
  - 문제 네비게이션(1~60): 각 문항 상태를 `O / X / ?`로 색상 표시
  - 빠른 이동: 번호 클릭으로 해당 문제로 즉시 이동
  - 답안 잠금: 한 번 채점한 문제는 선택지 수정 불가
  - 키보드 풀이 지원
    - `1/2/3/4`: 선택지 선택
    - `Enter` 또는 `Space`: 정답 확인 / 다음 / 결과 보기
  - 버튼 위치 최적화: 정답 확인/다음 버튼을 문제-해설 영역 우하단에 배치
  - 시험 종료 UX
    - `종료` 클릭 시 확인 팝업 표시
    - 현재 점수 및 풀이 완료 수를 안내한 뒤 회차 선택 화면으로 이동
  - 문제 신고 기능
    - 항목 선택형 신고: `그림이 없음 / 해설이 이상함 / 해설이없음 / 문제가 이상함 / 문제가없음`
    - `기타` 선택 시 직접 사유 입력 가능
    - 동일 문항에서 신고 완료 시 해당 세션에서 신고 UI 숨김
    - 신고 내용은 관리자 페이지 통계로 자동 집계

- 오답 학습
  - 채점 완료 후 `오답만 다시 풀기` 지원
  - 오답 재풀이 후 점수는 원시험(60문항) 누적 점수 기준으로 재계산

- 랜덤 모드
  - `랜덤풀기`에서 회차별 문제를 섞어 새로운 세트로 풀이 가능
  - 랜덤 문항도 원본 회차/문항 정보를 보존해 신고·관리자 상세 추적 가능

- 채점 및 결과
  - 문항별 정오답 즉시 확인
  - 총점/과목별 점수 및 합격 여부 제공
  - 합격 기준
    - 총점 `36/60` 이상
    - 과목별 `8/20` 이상(7 이하 과락)

- 관리자 리포트 대시보드 (`/admin`)
  - 비밀번호 보호 페이지 (기본 비밀번호: `testbob`)
  - 방문/시작/완료/합격 퍼널 및 일자별 추이
  - 회차별 시작·완료·합격률 통계
  - 과목별 평균 정답률
  - 문제 신고 사유별 건수 그래프
  - 최근 문제 신고 목록(시간/회차/문항/사유/문제 요약)
  - 신고 리스트 개선
    - 그룹형 목록(원본 회차+문항 기준 묶음)
    - 아코디언 UX: 하나를 열면 나머지는 자동 닫힘
    - 헤더 정렬: `원본 회차 / 신고 수 / 최근 신고` 오름·내림
    - 상세 이력 정렬: `시간 / 문항` 오름·내림
    - 체크박스 기반 삭제(그룹 선택 삭제, 상세 항목 선택 삭제)
    - 신고 상세 모달에서 원문항/정답/해설/문제 이동 링크 확인

## 실행 방법

```bash
npm install
npm run dev
```

## 데이터 수집(리포트용)

- 이벤트 수집 API: `POST /api/analytics/event`
- 관리자 집계 API: `GET /api/admin/metrics`
- 수집 이벤트 예시
  - `visit_test`: 모의시험 선택 페이지 방문
  - `start_exam`: 시험 시작
  - `finish_exam`: 시험 종료(총점/과목별 점수/합격 여부 포함)
  - `report_problem`: 문제 신고(문항번호/신고사유/문제 요약 포함)
- 저장소
  - Supabase 환경변수가 설정되면 Supabase 테이블에 저장
  - 미설정 시 `data/analytics-events.json`(로컬 파일)로 자동 폴백

### Netlify + Supabase 설정

1. Supabase SQL Editor에서 `scripts/supabase-analytics.sql` 실행
2. Netlify 환경변수 추가
   - `SUPABASE_URL=https://<project-id>.supabase.co`
   - `SUPABASE_SERVICE_ROLE_KEY=<service_role_key>`
   - `SUPABASE_EVENTS_TABLE=analytics_events` (선택, 기본값 동일)
3. 기존 OpenAI 키는 그대로 두고, 위 2~3개만 추가하면 됨
   - `OPENAI_API_KEY`와 충돌하지 않음

### Discord 신고 알림

- 문제 신고 발생 시 Discord Webhook으로 알림 전송 가능
- 환경변수
  - `DISCORD_REPORT_WEBHOOK_URL=<discord_webhook_url>`
  - `ADMIN_DASHBOARD_URL=https://<your-domain>/admin`
- 알림 내용
  - 신고 시간(월/일 시/분), 회차, 문항, 사유, 문제 요약
  - 관리자 페이지 바로가기 링크 포함

## 비용/운영 효율 개선 효과 (추정)

아래 수치는 현재 구현(캐시 재사용, 무료 티어, 중복 집계) 기준의 **운영 체감 추정치**입니다.
실제 값은 트래픽/질문 중복도/운영 방식에 따라 달라질 수 있습니다.

- GPT 이의신청 캐시 재사용(문항+질문 이력 기준)
  - 동일 문항/유사 질문의 재요청은 캐시를 우선 반환
  - 기대 효과: GPT API 호출량 **약 30~70% 감소(중복 요청 구간 기준)**
  - 기대 효과: GPT 응답 대기시간 **약 20~50% 단축**

- Supabase 무료 티어 기반 이벤트/리포트 저장
  - 초기/소규모 운영에서 별도 DB 고정비 없이 운영
  - 기대 효과: 인프라 고정비 **최대 100% 절감(무료 티어 한도 내)**

- 신고 데이터 그룹화(원본 회차+문항 단위) + 정렬/선택 삭제
  - 같은 문항 반복 신고를 묶어 한 번에 확인/처리
  - 기대 효과: 관리자 신고 트리아지/정리 시간 **약 20~40% 절감**

- 동일 세션·동일 문항 신고 1회 제한
  - 중복 클릭/중복 전송 방지
  - 기대 효과: 불필요 신고 이벤트 **약 10~30% 감소**

- 로컬 파일 폴백(분석 데이터)
  - Supabase 미연결 환경에서도 수집 지속
  - 기대 효과: 개발/테스트 단계 수집 중단 리스크 **유의미하게 감소**

## 문제 / 해결 / 성과

- 문제: GPT 해설 요청이 중복 발생해 API 비용과 대기시간이 증가
  - 해결: 문항+선택답+질문이력을 기준으로 캐시 키를 구성하고 캐시 우선 응답 처리
  - 성과: 중복 요청 구간에서 GPT API 호출량 **약 30~70% 감소**, 응답 대기시간 **약 20~50% 단축**

- 문제: 신고/운영 데이터가 흩어져 있어 관리자 대응 시간이 길어짐
  - 해결: 원본 회차+문항 기준 그룹화, 정렬, 선택 삭제, 상세 모달 기반 운영 흐름 구축
  - 성과: 신고 트리아지/정리 시간 **약 20~40% 절감**

- 문제: 사용자 해설 품질에 대한 피드백 루프 부재
  - 해결: GPT 답변에 좋아요/싫어요(1인 1회) 도입, 관리자 대시보드 집계 연동
  - 성과: 캐시 해설 품질 선별 기반 확보(좋아요 높은 답변 우선 재사용 정책 적용 가능)

- 문제: 초기 운영 단계 인프라 비용 부담
  - 해결: Supabase 무료 티어 + 로컬 폴백 + 캐시 재사용 구조로 비용 최적화
  - 성과: 무료 티어 구간에서 DB 고정비 **최대 100% 절감**, 장애/설정 누락 시 수집 연속성 확보

## 최근 UX 패치

- 시험 시작 시 최초 1회 안내 토스트 표시(자동 카운트다운 후 닫힘)
- 해설 텍스트 가독성 개선(줄바꿈/목록형 정리)
- `원본 보기`/표형 문제 대응을 고려한 데이터 구조 개선
- `100문제 풀어보기` 전용 세트(`problem100`) 및 `개발자가 방금만든 따끈 문제 60` 세트 추가

## 향후 개선 아이디어

- 해설 품질 고도화(문항별 상세 근거 보강)
- 원문 PDF 바로보기 연동 강화
- 학습 통계 대시보드(회차별/과목별 취약영역)
